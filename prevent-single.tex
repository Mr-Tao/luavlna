\input luatexbase.sty
\directlua{%                                  
preventsingle = require "prevent-single" 
luatexbase.add_to_callback("pre_linebreak_filter", preventsingle.preventsingle,"~")

set_singlechars = function(chars)
  local utf_gmatch = unicode.utf8.gmatch
  local chars = chars  or ""
	local singlechars = {}
	for char in utf_gmatch(chars,"(\%a)") do
  	singlechars[char] = true
	end
	preventsingle.singlechars = singlechars
end
}     

\def\singlechars#1{%
\directlua{
set_singlechars("#1")
}
}
